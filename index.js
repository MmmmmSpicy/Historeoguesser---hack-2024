const poi_list =  [
  { name: ("SWEM Library"),
  desc: "The Earl Gregg Swem Library (colloquially Swem Library) is located on Landrum Drive at the College of William and Mary in Williamsburg, Virginia. The library is named for Earl Gregg Swem, College Librarian from 1920-1944.[1] In 2008, the Princeton Review rated William & Mary's library system as the eighth best in the United States.[2] The ranking was based on a survey of 120,000 students from 368 campuses nationwide.[2]",
  coords: {lat: 37.2702944, lng: -76.7163559}
  },
      
  { name: 'Integrated Science Center',
  desc: "The Integrated Science Center (ISC) sits next to Lemon and Hardy Residence Halls on Barksdale Field. The facility was constructed to integrate William & Mary’s science programs, allowing increased opportunity for multidisciplinary research. Currently, the ISC is the only place on campus where courses and research projects in Applied Science, Biology, Chemistry, Neuroscience, Physics and Psychology exist in the same building. With over 100,000 sq. ft. of space, the ISC consists of a large seminar room, colloquiums, teaching and research labs, a machine shop, glass-blowing faculty, instrument rooms, reading rooms and eat-in kitchens. Research laboratories are equipped with various levels of fume hoods, biosafety cabinets, laboratory equipment, computing equipment, and laboratory emergency equipment including eyewashes, spill kits and fire extinguishers.  On the campus of William & Mary, this is the only building with biological and hazardous waste accumulation rooms managed by the EH&S Office.",
  coords: {lat: 37.2702364, lng: -76.7144971},
  },
      
  { name: 'Sadler Center,',
  desc: "The University Center was renamed the Sadler Center in honor of Sam Sadler, class of 1964, M.Ed. 1971. The name change was announced during the College of William & Mary's commencement ceremony on May 11, 2008. Located at 200 Stadium Drive, adjacent to Zable Stadium, today the three-story complex houses everything from the Commonwealth Auditorium - the College's largest auditorium after Phi Beta Kappa Hall -- to a number of multi-purpose rooms used by students, faculty and staff. It also is home to one of the College's largest dining halls as well as the student post office, retail and recreation space. The new Cohen Career Center is adjacent to the Sadler Center. David Turner's Soaring Eagle sculpture is in the atrium.",
  coords: {lat: 37.2718334, lng: -76.7134909},
  },
      
  { name: 'Monroe Hall',
  desc:  "Monroe Hall, formally named James Monroe Memorial Hall, is a dormitory located northwest of Tucker Hall on the campus of William & Mary. It currently serves as a co-ed dormitory for freshmen, including Monroe Scholars. It was named for James Monroe, who attended William & Mary 1774-1776 and was the 5th President of the United States. Construction began on Monroe Hall in 1923, and it opened in September 1924 as a men’s dormitory. The plan for Monroe Hall was similar to the plan for Jefferson Hall save for the absence of a gymnasium and the addition of an attic. The dormitory was able to accommodate 168 men. The dedication ceremony took place on June 9, 1925, and featured speakers such as John Stewart Bryan, publisher of the Richmond Times Dispatch and later President of William & Mary. In 1928 and 1929, a small post office for Monroe Hall and Old Dominion Hall was located in Monroe Hall. In 1931, an airport pointer and meridian marker were painted bright yellow with a black background on the roof of Monroe Hall to illuminate the roof for night flyers. While the Naval Chaplains School was stationed at William & Mary during World War II, the US Navy Chaplain's residence was located on the first floor of Monroe Hall.",
  coords: {lat: 37.2716826, lng: -76.7103896},
  },
      
  { name: 'Commons Dining Hall',
  desc: "The Commons, often referred to as the “Caf” by the students, is a large dining hall on Ukrop Way between the Randolph Complex and William & Mary Hall. The “Caf” is the university’s only free-standing dining facility. The building was designed by Architect Hubert L. Jones, and the Commons opened to students in September 1967. The dining facility underwent large-scale renovations in 1987 and 2005. During the 2005 renovation, William & Mary pitched a temporary dining tent on Yates Field and called it the “UnCommons.” Students quickly dubbed it 'deCaf'.",
  coords: {lat:37.2718533 , lng: -76.719333},
  },
      
  { name: 'Green and Gold Village',
  desc: "The Green & Gold Village is a co-ed freshman housing complex at William & Mary comprising three buildings: Griffin, Eagle, and Lion. Up to 428 residents can occupy the complex directly across Ukrop Way from William & Mary Hall. The buildings that now make up the Green & Gold Village were constructed between 1965 and 1968 and served as the university’s fraternity complex until the opening of the current one in 2013. The first 4 fraternities to occupy the complex, Kappa Sigma, Lambda Chi Alpha, Kappa Alpha, and Keplar (a colony of the Sigma Chi Fraternity), began to take residence in the fall of 1967. Several other fraternities began to slowly occupy the units throughout the 1967-1968 academic year, with the last ones taking residence in the fall of 1968.Each hall in the three buildings has a full kitchen and lounge on the first floor, as well as laundry machines and large lounges for study and recreation in the basement.",
  coords: {lat: 37.2745679, lng: -76.7171769},
  },
      
  { name: 'Randolph Complex',
  desc: "The Randolph Complex, also known as the Randolph Residences, is a cluster of dormitories located east of the Commons on the campus of William & Mary. The dorms within the complex are varied in terms of their internal structure and include both dorm-style and apartment-style housing. The Randolph Complex houses upperclassmen and includes the language houses. The buildings in the complex are named for Virginia governors: Giles, Pleasants, Harrison, Page, Tazewell, Cabell, Nicholas, and Preston. The complex itself is named for four Randolph men, all graduates of William & Mary, who served as governors of Virginia: Edmund Randolph (1753-1813), Beverly Randolph (1754-1797), Peyton Randolph (1779-1828), and Thomas Mann Randolph (1768-1828). Construction of five of the buildings (four dormitories for housing 246 students and one building for activities) was completed in July 1980. In the same year, five sorority court houses underwent renovation and the women previously living in those houses occupied Giles and Pleasants for the first semester of the 1980-1981 academic year. The dedication ceremony for the Randolph Complex was held on October 11, 1980 at Tazewell House on Parents' Weekend. Two new dormitories, Nicholas and Preston, were built in 1988 to house 106 more students. In March 2005, an exhaust fan sparked a fire in Preston Hall and, as a result, some students began the next school year living at Colonial Williamsburg's Governor's Inn.",
  coords: {lat: 37.2712101, lng: -76.7195004},
  },
      
  { name: 'Jefferson Hall',
  desc: "Jefferson Hall, constructed between 1920 and 1921, was built as a women’s dormitory and today houses co-ed undergraduate upperclassman located on Old Campus. The dorm is named for Thomas Jefferson, class of 1762. The dormitory opened in September 1921 and contained a gymnasium, pool, parlors and apartments for the director of women and for female teachers and rooms for 125 female students. The gymnasium was used for functions such as dances and basketball games and was available to both men and women from 1922 to 1925 while Blow Hall was being built. The iron gates from the Capitol Building in Richmond, erected in front of Jefferson Hall facing Jamestown Road, were given by the D.A.R. as a memorial to Kate Waller Barrett and dedicated on April 30, 1926. The first African-American co-eds in residence at William & Mary lived in the basement of Jefferson Hall in 1965. Jefferson Hall underwent renovations in the late 1970s to add more dorm rooms and was destroyed by fire on January 20, 1983, but the outer walls remained standing. The residence hall officially reopened on January 27, 1985, and was fully occupied by undergraduate students.",
  coords: {lat: 37.2694185, lng: -76.7101715},
  },
      
      
  { name: 'Lemon Hall',
  desc: "Lemon Hall is named in honor of Lemon, man held enslaved by William & Mary. Today, Lemon is also remembered by the Lemon Project, an organization which seeks to explore and heal the relationship between William & Mary and the African and African-American communities in Williamsburg and beyond.",
  coords: {lat: 37.2681929, lng: -76.7131253},
  },
      
  { name: 'Tucker Hall',
  desc:  "Tucker Hall is an academic building located along the north side of the Sunken Garden near the Wren Building. It was originally constructed as William & Mary’s first dedicated library building and served as such until the opening of the Earl Gregg Swem Library in 1966. Today, Tucker Hall houses the Department of English and several classrooms. In 1905, Andrew Carnegie pledged funds to build the university’s library and the cornerstone was laid in 1908. The library in Tucker Hall was dedicated and opened to the public in 1909 and housed over 12,000 volumes. Dances were held in the library in 1920. The building was renovated a number of times as the university and its library collections expanded. In 1943, during World War II, an airplane spotting station was moved into the library tower. In 1958, as a result of increased enrollment at William & Mary, a new library building was proposed and opened in 1966 as the Earl Gregg Swem Library. Shortly afterwards, the building underwent renovations to prepare it for its newest tenant: the Law School. The building was renamed Marshall-Wythe Hall in 1968. In 1980, as the law school moved out to its current location on South Henry St. and the English department moved in, William & Mary changed the building's name to Tucker Hall in honor of former law professor and Revolutionary War veteran St. George Tucker.",
  coords: {lat: 37.2716983, lng: -76.7099414},
  },
      
  { name: 'One Tribe Place',
  desc: "One Tribe Place is a co-ed dormitory at William & Mary that houses upperclassman. On March 22, 2013, William & Mary President Taylor Reveley announced the university would acquire the Hospitality House, a popular privately-owned hotel. On March 22, 2013, William & Mary President Taylor Reveley announced the university would acquire the Hospitality House and its parking lot. The acquisition reflected a need for more student housing and parking space. The location of the hotel, directly across Richmond Road from Zable Stadium, and its brick exterior that aesthetically matched the university’s buildings, made it an ideal choice for expansion. The first student residents moved into the newly-named One Tribe Place in fall of 2013.",
  coords: {lat: 37.2741128, lng: -76.7133839},
  },
      
  { name: 'Jones Hall',
  desc:  "Hugh Jones Hall, commonly known as Jones Hall, is located on Ukrop Way between Small Hall and Morton Hall and houses the Office of Information Technology as well as the Math department. Jones Hall was constructed between 1968 and 1969 and opened for the 1969 summer session with 25 classrooms and 60,000 square feet of space. At the time of completion, Jones Hall housed the Computer Center in the basement, the Math department on the first floor, Philosophy and Government departments on the second floor, and the Business school on the third floor. The academic building was named in honor of Rev. Hugh Jones, Professor of Natural Philosophy and Mathematics from 1717-1721, and was dedicated on Charter Day, February 7, 1970. The School of Education moved to Small Hall in 1976, replacing the Philosophy department, and continued to occupy the building until June 2010, when it moved to its current location off Monticello Avenue.",
  coords: {lat: 37.267699, lng: -76.7177079 },
  },
      
  { name: 'Small Hall',
  desc:  "Small Hall is located on Ukrop Way between the Earl Gregg Swem Library and Jones Hall. William & Mary broke ground for the 778,000-square-foot building in August 1962. The building is named for William Small, a professor of Natural Philosophy and mentor to Thomas Jefferson while a student. The building was completed in December 1963 and has been in use since February 1964. Small Hall is currently the home of the Department of Physics and the Physics Library. A twelve-foot observatory dome housing a ten-inch reflecting telescope was built on the roof in 1975. The observatory was named the Thomas Harriot Observatory after the first astronomer in Virginia who accompanied Raleigh’s expedition from 1585 to 1586. A 6,800 square-foot, two-story addition was added to Small Hall between March and November 1985, containing ten faculty offices and a two-story library. A project to install a large, high field NMR magnet was completed in 2005 and is one of the largest in the state. From 2008-2011, a large renovation project took place that installed solar panels on the roof, created more lab space, and added a Faraday cage to shield against external electromagnetic radiation.",
  coords: {lat: 37.2690829, lng: -76.7174615},
  },
      
  { name: 'Zable Stadium,',
  desc: "Zable Stadium is the main football and track and field venue at William & Mary. Before its dedication as Zable Stadium in 1990, it was known as Cary Field, Cary Field Stadium, or unofficially, William & Mary Stadium. It is located between the Cohen Career Center and the Alumni House, alongside the Jimmye Laycock Football Center. Cary Field, now the location of Zable Stadium, was so named to honor T. Archibald Cary of Richmond, Virginia, a member of the Board of Visitors, and his father John B. Cary. The new enclosed field was constructed from 1907 to 1909, and completed in time for the baseball season in 1909. In 1909, Cary had donated a total of $2665 to the effort. About $170 was appropriated to paint and stain the grandstand and fence of the newly named Athletic Field that same year. In 2021, the Board of Visitors, as part of a comprehensive review of building names on campus, determined that the honorific for Cary Field shall henceforth be for T.A. Cary alone. The stadium was built in 1935. The Board of Visitors approved the present name at their November 2, 1990, meeting. In 1996, the north gate facing Richmond Road was named the John Harvard Randolph ‘64 Alumni Gate.  The stadium is named after Walter J. Zable, class of 1937, president and chief executive officer of the Cubic Corporation, and his wife, Betty C. Zable, class of 1940. Walter Zable was a track and football star during his time at William & Mary.",
  coords: {lat: 37.272925, lng: -76.7143516},
  },
      
  { name: 'Kaplan Arena',
  desc: "Formerly known as William & Mary Hall, Kaplan Arena is an indoor arena at William & Mary that hosts university-wide events such as concerts, Charter Day ceremonies, Commencement exercises, and Tribe intercollegiate athletic events. The inside arena is an 8,600-seat multi-purpose venue that was named in 2005 in honor of basketball benefactors Jim and Jane Kaplan. The arena hosts men’s and women’s basketball, men’s and women’s gymnastics, and volleyball games. The building also contains weight rooms, practice facilities, and the Athletics department. At their September 2016 meeting, the Board of Visitors voted to rename the whole building in honor of the Kaplans. The need for a large, modern athletic arena had been identified by William & Mary in its long-range planning and the idea gained traction in the budgeting cycles of the 1960s. Construction of William & Mary Hall began in September 1969 and, when completed, replaced Blow Gym as the university’s primary athletic facility. Sly and the Family Stone was the first band to play a concert there in 1971. Other notable performers include the Grateful Dead, James Taylor, Deep Purple, Neil Young, REM, and The Police. In 1993, HRH Prince Charles participated in Charter Day celebrations here. Before online registration for classes was introduced, students would wait in line to register for classes at the Hall each semester. The arena was home to the Wightman Cup tennis competition from 1983-1990 when top women’s tennis players including Chris Evert, Martina Navratilova, and Jennifer Capriati competed. The Wightman Cup Room is located on the mezzanine level of Kaplan Arena.",
  coords: {lat: 37.2726219 , lng: -76.7199043 },
  },
       
  { name: 'Alan B. Miller Hall (Raymond A. School of Business)',
  desc: "Alan B. Miller Hall, commonly known as Miller Hall, is located at the corner of Ukrop Way and Jamestown Road and is home to the Mason School of Business. The groundbreaking ceremony took place in March 2007, and construction was completed in June 2009. The building is named after Alan B. Miller, class of 1958, founder of Universal Health Services, Inc., and a prominent donor to William & Mary. Prior to the opening of Miller Hall in 2009, the business school had occupied a number of buildings over the years, including portions of Blow Hall, Tyler Hall, Jones Hall, and the Old Gymnasium. The first business courses taught at William & Mary were taught during the 1919-1920 academic year. By 1930, the number of students enrolled in business classes totaled 556. In 1941, John Stewart Bryan announced the creation of a new Business Administration Department. Previously, business classes were taught within the Economics Department. This new school allowed students to concentrate in different aspects of business including general business, foreign trade, insurance, marketing, banking, and finance.",
  coords: {lat: 37.2662743, lng: -76.7177205},
  },
       
  { name: 'School of Education',
  desc: "The School of Education was created as a distinct entity within the academic structure at William & Mary in 1961. In the early 2000s, the school’s physical needs were so large that it had several locations on and off campus, and there was a need to create a single structure to house all of the offices. Construction of the current School of Education building began in 2008 and was completed in 2010. Prior to 2010, the school was located primarily in Jones Hall. During the years that the school has been in existence, the traditional commitment to undergraduate education for teachers has been supplemented by a wide range of graduate degree programs, including conferral of the first doctoral degree in Education in 1972. In the past decade, the School of Education has become an institutional leader in advanced studies. William & Mary enhanced its formal role in the preparation of future educators starting in 1888 when the Virginia General Assembly appropriated substantial annual grants for the express purpose of funding the university to combine liberal education with certification of teachers for the Commonwealth's emerging public school system. This was reaffirmed in 1906 when the Commonwealth stated that one of its primary objectives in assuming responsibility for William & Mary as a state institution was to ensure a source of well-educated and trained public school teachers throughout Virginia. In subsequent decades, the university’s claim to excellence in professional education escalated due to innovations in two areas: its programs for educating school principals and superintendents and the founding of the Matthew Whaley School, one of the most influential laboratory schools in the nation.",
  coords: {lat: 37.2785785, lng: -76.7238843},
  }       
]


let guess_location;
let random_poi = poi_list[Math.floor((Math.random() * (poi_list.length)))];
let random_location = random_poi.coords;
let random_name = random_poi.name;
let random_desc = random_poi.desc;

let markers = [];


const { Map } = await google.maps.importLibrary("maps");
const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

const myLatLng = { lat: 37.2706829, lng: -76.7159741 };
const map = new Map(document.getElementById("minimap"), {
  center: myLatLng,
  zoom: 16,
  streetViewControl: false,
  mapTypeControl: false,
  fullscreenControl: false,
  zoomControl: false,
  mapId: "4504f8b37365c3d0",
});

let marker = new AdvancedMarkerElement({
  map,
  position: { lat: 37.2706829, lng: -76.7159741 },
});
markers.push(marker); 

let rndmarker = new AdvancedMarkerElement({
  map: null,
  position: random_location,
});
markers.push(rndmarker); 

function initialize() {
  clear_markers()
  
  let panorama = new google.maps.StreetViewPanorama(
      document.getElementById("map"),
        {  
          position: random_location,
          linksControl: false,
          panControl: true,
          enableCloseButton: false,
          fullscreenControl: false,
          addressControl: false,
          showRoadLabels: false,
          clickToGo: false,
          zoomControl: false,
          zoomControlOptions: {
              position: google.maps.ControlPosition.TOP_LEFT,
          }
          
        },
  );

  let rndmarker = new AdvancedMarkerElement({
      map: null,
      position: random_location,
  });
  
  

  map.addListener("click", (mapsMouseEvent) => {
      marker.setMap(null)
      guess_location = mapsMouseEvent.latLng
      marker = new AdvancedMarkerElement({
          map,
          position: mapsMouseEvent.latLng
          
      });   
      markers.push(marker);

  });



  document.getElementById("myCheckbox").addEventListener("change", function() {
    if (this.checked) {
      guess(); // Call function to reveal location when checkbox is checked
    }
  });  
}
  


function calculate_distance() {
  var randomLat = random_location.lat;
  var randomLng = random_location.lng;
  var guessLat = guess_location.lat();
  var guessLng = guess_location.lng();

  var dLat = 111.32 * Math.abs(randomLat - guessLat);
  var dLng = (40075 * Math.cos(randomLat - guessLat) / 360) * (randomLng - guessLng);
  return 1000 * (Math.sqrt(Math.pow(dLat, 2) + Math.pow(dLng, 2))); // Meters!
}
function clear_markers() {
  markers.forEach(marker => {
      marker.setMap(null);
  });
  markers = [];
}

function reveal_location() {
  rndmarker.setMap(map);
}

function guess() {
  reveal_location(); // Reveal the random location
  var score = Math.round(calculate_distance()); // Calculate distance
  document.getElementById("distance-value").innerText = `${score} meter(s)`; // Display distance in the placeholder 
}

function randomize_location() {
  let random_poi = poi_list[Math.floor((Math.random() * (poi_list.length)))];
  random_location = random_poi.coords;
  let random_name = random_poi.name;
  let random_desc = random_poi.desc;
}

initialize();